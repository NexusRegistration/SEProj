<!DOCTYPE html>
<html>
    <head>
        <!--Header-->
	    <%- include('../partials/headers/header-student.ejs')%>
        
        <link rel="stylesheet" href="/css/style.css">
        <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />

    </head>

    <body>
        <div class="welcome-bar">
            <h1>Welcome <%- user.name %>!</h1>
        </div>

        <div class="container">
            <main>
                <h2>My Classes</h2>
                
                <div class="view-select-bar"> 
                    <a class="btn-table" href="#student-class-table">Table</a> / <a class="btn-calendar" href="#student-class-calendar">Calendar</a>
                </div>

                <div class="student-class-table" id="student-class-table">
                    <table>
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Name</th>
                                <th>Teacher</th>
                                <th>Time</th>
                            </tr>
                        </thead>
                        <tbody>
                            <% for (var i=0; i < classes.length; i++) { %>
                                <tr>
                                    <!--Displays Class Subject-->
                                    <td>
                                        <%= classes[i].subject.department %>-<%= classes[i].subject.classID %>
                                    </td>
                                    <!--Displays Class Name-->
                                    <td>
                                        <%= classes[i].subject.className %>
                                    </td>
                                    <!--Displays Teacher Name-->
                                    <td>
                                        <% if(classes[i].teacher){ %>
                                            <%= classes[i].teacher.name %>
                                        <% } else{ %>  
                                            Undetermined
                                        <% } %>
                                    </td>
                                    <!--Displays Class Schedule-->
                                    <td>
                                        <% if(classes[i].schedule && classes[i].schedule.classTimes){ %>
                                            <% for (var j=0; j < classes[i].schedule.classTimes.length; j++) { %>
                                                <%= classes[i].schedule.classTimes[j].day %>
                                                <% if(j < classes[i].schedule.classTimes.length - 1) { %>
                                                    &nbsp
                                                <% } %>
                                            <% } %>

                                            &nbsp | &nbsp
                                            <%= classes[i].schedule.classTimes[0].startTime %>
                                            -
                                            <%= classes[i].schedule.classTimes[0].endTime %>
                                            
                                        <% } else{ %>  
                                            Undetermined
                                        <% } %>
                                    </td>
                                </tr>
                            <% } %>
                        </tbody>
                    </table>
                </div>
                <div class="student-class-calendar" id="student-class-calendar">
                    Hello all!
                </div>
            </main>
            <div class="right">
                <h2>Registration</h2>
                <div class="admin-create-bar">
                    <a href="/student/classes">
                        <span class="material-symbols-outlined">edit_square</span>
                        <h3>Edit Classes</h3>
                    </a>
                    <a href="/student/wishlist">
                        <span class="material-symbols-outlined">shopping_bag</span>
                        <h3>Saved Classes</h3>
                    </a>
                </div>

                <div class="active-classes">
                    <h2>Current Classes</h2>
                    <div class="class-container">
                        <!--Change math for admin-->
                        <h3>
                            <% let hr = new Date().getHours();%>
                            <% let min = new Date().getMinutes();%>
                            <% let period = ["AM","PM"]; %>
                            <% if (hr === 0) { %>
                                <% hr = 12; %>
                                <%= hr %>  :
                                <% if (min < 10) { %>
                                    0<%= min %>
                                <% } else { %>
                                    <%= min %>
                                <% } %>
                                <%= period[0] %>
                            <% } else if (hr > 12) { %>
                                <% hr = hr % 12; %>
                                <%= hr %>  :
                                <% if (min < 10) { %>
                                    0<%= min %>
                                <% } else { %>
                                    <%= min %>
                                <% } %>
                                <%= period[1] %>
                            <% } else { %>
                                0<%= hr %>  :
                                <% if (min < 10) { %>
                                    0<%= min %>
                                <% } else { %>
                                    <%= min %>
                                <% } %>
                                <%= period[0] %>
                            <% } %>
                        </h3>
                        <h1>
                            <% let m = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"]; %>
                            <%= m[new Date().getMonth()];%>
                            <%= new Date().getDate();%>,
                            <%= new Date().getFullYear();%>
                        </h1>
                        <div class="class-format">
                            <h4>Class Name</h4>
                            <small>1:15-1:23pm</small>
                        </div>
                    </div>
                </div>

                <div class="active-classes">
                    <h2>Upcoming Classes</h2>
                    <div class="class-container">
                        <div class="class-format">
                            <h4>Class Name</h4>
                            <small>1:15-1:23pm</small>
                        </div>
                        <div class="class-format">
                            <h4>Class Name</h4>
                            <small>1:15-1:23pm</small>
                        </div>
                        <div class="class-format">
                            <h4>Class Name</h4>
                            <small>1:15-1:23pm</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!--Add/Help Button-->
	    <%- include('../partials/help-button.ejs')%>

    </body>
</html>